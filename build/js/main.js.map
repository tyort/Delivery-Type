{"version":3,"file":"main.js","sources":["source/js/main.js"],"sourcesContent":["const pageDelivery = document.querySelector(`.page-delivery`);\nconst form = pageDelivery.querySelector(`form`);\nconst pickupAddresses = pageDelivery.querySelector(`.delivery-feature--addresses`);\nconst username = form.querySelector(`#block-name`);\nconst phone = form.querySelector(`#block-phone`);\nconst address = form.querySelector(`#block-address`);\nconst deliveryTypes = pageDelivery.querySelector(`.delivery-types`);\nconst deliveryButtons = pageDelivery.querySelectorAll(`.delivery-type`);\nconst pointsList = pageDelivery.querySelector(`.pick-up-points`);\nlet checkedPoints = [];\nlet myMap = null;\n\n\nconst pickupPoints = {\n  'sand': [`Песчаная ул.`, [55.982502, 37.139599]],\n  'underpine': [`Подсосенский пер.`, [55.977138, 37.152390]],\n};\n\ndeliveryButtons.forEach((button) => {\n  button.addEventListener(`click`, (evt) => {\n    deliveryButtons.forEach((btn) => {\n      btn.style.backgroundColor = `#EDEEEF`;\n      btn.style.color = `#999999`;\n    });\n    button.style.backgroundColor = `#FFFFFF`;\n    button.style.color = `#215BF0`;\n  });\n});\n\ndeliveryTypes.addEventListener(`click`, (evt) => {\n  if (evt.target.textContent === `Самовывоз`) {\n    pickupAddresses.classList.toggle(`visually-hidden`, true);\n    form.classList.toggle(`visually-hidden`, false);\n  } else {\n    pickupAddresses.classList.toggle(`visually-hidden`, false);\n    form.classList.toggle(`visually-hidden`, true);\n  }\n});\n\n\nwindow.$(document).ready(() => {\n  window.$(phone).mask(`+7 (999) 999-99-99`);\n});\n\n\nform.addEventListener(`input`, (evt) => {\n  evt.preventDefault();\n\n  const nameSample = /^[а-яА-ЯёЁ -]{1,50}$/u;\n  const addressSample = /^.{1,100}$/u;\n\n  checkInputValidity(username, nameSample, `Скажи, как зовут то ?)`);\n  checkInputValidity(address, addressSample, `Спорим, угадаю где живешь ?)`);\n});\n\nform.addEventListener(`submit`, (evt) => {\n  evt.preventDefault();\n  form.reset();\n});\n\nwindow.addEventListener(`mapWasLoaded`, () => {\n  window.ymaps.ready(init);\n});\n\npointsList.addEventListener(`change`, (evt) => {\n  const checkedPointsSet = new Set(checkedPoints);\n\n  if (evt.target.checked) {\n    checkedPointsSet.add(evt.target.value);\n  } else {\n    checkedPointsSet.delete(evt.target.value);\n  }\n\n  checkedPoints = [...checkedPointsSet];\n  myMap.geoObjects.removeAll();\n\n  for (let i = 0; i < checkedPoints.length; i++) {\n    myMap.geoObjects\n        .add(new window.ymaps.Placemark(pickupPoints[checkedPoints[i]][1], {\n          balloonContent: `${pickupPoints[checkedPoints[i]][0]}`\n        }, {\n          iconLayout: `default#image`,\n          iconImageHref: `img/icon-pickup-point.svg`,\n          iconImageSize: [33.33, 40],\n          iconImageOffset: [-16.66, -40],\n        }));\n  }\n});\n\nfunction init() {\n  myMap = new window.ymaps.Map(`YMapsID`, {\n    center: [55.982700, 37.140552],\n    zoom: 13,\n  }, {\n    searchControlProvider: `yandex#search`\n  });\n}\n\nfunction checkInputValidity(inputName, sample, message) {\n  const value = inputName.value.trim();\n\n  if (!sample.test(value)) {\n    inputName.setCustomValidity(message);\n\n  } else {\n    inputName.setCustomValidity(``);\n  }\n}\n\n\n"],"names":[],"mappings":"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"}